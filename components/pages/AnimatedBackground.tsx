"use client";

import { useEffect, useRef, useState } from "react";
import { GradientBackground } from "./GradientBackground";

export function AnimatedBackground() {
  const [scrollProgress, setScrollProgress] = useState(0);
  const backgroundRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const handleScroll = () => {
      const windowHeight = window.innerHeight;
      const documentHeight = document.documentElement.scrollHeight;
      const scrollTop = window.scrollY;
      const scrollableHeight = documentHeight - windowHeight;
      const progress = Math.min(scrollTop / scrollableHeight, 1);
      setScrollProgress(progress);
    };

    window.addEventListener("scroll", handleScroll, { passive: true });
    handleScroll(); // Initial call

    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  // Calculate scale based on scroll progress
  // Start at 1, zoom to 2.5 as user scrolls
  const scale = 1 + scrollProgress * 1.5;

  // Calculate rotation - gradually increase rotation as user scrolls
  const _rotation = 31.1 + scrollProgress * 30;

  return (
    <div
      ref={backgroundRef}
      className="fixed inset-0 z-0 overflow-hidden pointer-events-none"
    >
      {/* Gradient Background */}
      <div
        className="absolute inset-0 flex items-center justify-center"
        style={{
          transform: `scale(${scale}) `,
          transition: "transform 0.1s ease-out",
        }}
      >
        {/* Mobile and Desktop gradient container */}
        {/*<svg
          width="395"
          height="502"
          viewBox="0 0 395 502"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M298.537 13.798C299.268 14.0411 299.268 14.0411 300.014 14.2892C338.511 27.1923 373 53.4553 392.85 88.9838C393.315 89.7727 393.781 90.5616 394.261 91.3744C395.113 93.4949 395.113 93.4949 394.833 95.0456C392.976 97.2465 390.669 98.7032 388.275 100.262C387.172 100.999 386.068 101.737 384.966 102.476C384.396 102.855 383.827 103.234 383.24 103.625C380.537 105.441 377.874 107.313 375.213 109.19C374.683 109.563 374.153 109.936 373.606 110.321C369.719 113.063 365.863 115.846 362.009 118.635C356.65 122.515 351.217 126.275 345.726 129.969C345.169 130.345 344.611 130.721 344.037 131.108C343.497 131.472 342.957 131.835 342.401 132.209C340.229 133.738 338.175 135.404 336.133 137.101C334.753 137.855 334.753 137.855 333.191 137.7C330.921 136.769 329.362 135.074 327.633 133.39C322.973 129.007 318.031 125.095 312.873 121.314C312.413 120.972 311.954 120.63 311.481 120.278C285.326 100.887 254.326 86.1945 221.578 82.9689C220.782 82.8865 219.985 82.8041 219.165 82.7193C187.139 79.832 153.207 87.9899 128.021 108.532C110.226 123.363 96.4584 143.112 93.3136 166.425C91.5562 188.665 97.4227 207.392 111.896 224.436C115.694 228.765 119.797 232.533 124.336 236.089C126.798 238.083 129.105 240.2 131.416 242.363C134.339 245.092 137.293 247.714 140.423 250.21C144.211 253.238 147.732 256.493 151.265 259.808C153.878 262.246 156.535 264.568 159.332 266.798C163.63 270.227 167.611 273.954 171.625 277.703C175.149 280.994 178.796 284.129 182.474 287.248C183.374 288.012 184.274 288.777 185.174 289.542C185.629 289.929 186.085 290.316 186.554 290.715C189.919 293.588 193.189 296.551 196.435 299.556C198.804 301.735 201.238 303.792 203.753 305.801C207.068 308.456 210.185 311.262 213.279 314.165C217.065 317.716 220.93 321.064 224.982 324.312C226.809 325.778 228.613 327.263 230.397 328.779C230.882 329.189 231.367 329.599 231.867 330.022C232.896 331.082 232.896 331.082 232.896 332.586C214.102 333.204 195.315 333.541 176.51 333.601C173.62 333.611 170.731 333.632 167.841 333.662C136.886 333.979 136.886 333.979 124.248 329.578C123.456 329.334 122.664 329.09 121.848 328.838C119.988 328.241 118.186 327.578 116.373 326.853C115.733 326.602 115.092 326.351 114.433 326.093C101.35 320.836 89.154 314.116 77.4691 306.271C76.9791 305.942 76.4892 305.613 75.9844 305.275C65.9382 298.472 56.8525 290.523 48.0436 282.211C47.6672 281.858 47.2909 281.504 46.903 281.14C40.866 275.429 35.6546 269.313 30.6902 262.663C30.2089 262.026 30.2089 262.026 29.7179 261.377C14.7836 241.551 4.58365 218.921 1.26471 194.244C1.19469 193.749 1.12466 193.255 1.05251 192.746C-3.80446 155.068 8.4729 113.83 31.1813 83.5644C33.9317 80.0187 36.8049 76.5858 39.7442 73.1947C40.3326 72.5105 40.921 71.8263 41.5272 71.1213C48.5936 63.1142 56.1673 55.6524 64.6426 49.1353C65.0689 48.7995 65.4951 48.4637 65.9343 48.1177C74.1203 41.6738 82.7237 36.1971 91.8046 31.0907C92.4358 30.7349 93.067 30.3791 93.7173 30.0125C154.776 -4.01872 232.84 -8.6556 298.537 13.798Z"
            fill="url(#paint0_radial_33_196)"
          />
          <path
            d="M226.123 166.306C228.467 166.295 230.81 166.277 233.153 166.252C256.897 166.011 256.897 166.011 268.347 169.542C269.451 169.859 270.555 170.175 271.659 170.489C294.417 177.103 315.67 190.65 333.773 205.766C334.157 206.083 334.54 206.399 334.935 206.726C344.974 215.04 354.46 224.019 362.35 234.444C362.672 234.864 362.993 235.284 363.324 235.716C386.612 266.247 398.469 302.708 394.109 341.305C389.295 377.351 373.11 409.868 348.062 435.944C347.66 436.363 347.258 436.783 346.845 437.215C341.535 442.733 336.092 447.875 330.013 452.546C329.605 452.863 329.196 453.18 328.775 453.506C310.673 467.468 290.463 477.813 269.099 485.752C268.504 485.976 267.908 486.199 267.295 486.429C207.133 508.707 135.837 505.935 77.5837 479.385C62.4081 472.241 48.494 462.938 35.9698 451.792C35.2796 451.183 34.5894 450.574 33.8782 449.946C22.1342 439.474 12.7346 427.43 4.61961 413.963C4.28377 413.418 3.94793 412.873 3.60191 412.311C3.29891 411.796 2.99591 411.281 2.68372 410.75C2.41259 410.296 2.14146 409.841 1.86211 409.373C1.21528 407.571 1.37327 406.753 2.12851 405.002C3.37975 403.845 3.37975 403.845 5.01619 402.741C5.62261 402.324 6.22904 401.908 6.85385 401.479C7.5125 401.038 8.17116 400.597 8.84977 400.143C10.235 399.195 11.6196 398.246 13.0036 397.296C14.0545 396.578 14.0545 396.578 15.1267 395.846C18.1196 393.78 21.052 391.635 23.9844 389.484C29.1851 385.686 34.4679 382.025 39.7896 378.401C44.5375 375.156 49.1842 371.79 53.7953 368.353C54.2019 368.055 54.6086 367.757 55.0276 367.45C55.9119 366.786 56.777 366.095 57.6274 365.387C58.989 364.296 58.989 364.296 61.5388 362.74C64.7522 363.25 66.5911 365.277 68.8711 367.504C82.6919 380.393 98.9488 391.057 115.685 399.719C116.188 399.981 116.69 400.243 117.208 400.513C141.721 413.123 169.314 419.961 196.904 418.586C197.76 418.544 197.76 418.544 198.633 418.501C228.032 416.778 254.573 404.738 275.867 384.625C276.365 384.174 276.864 383.723 277.377 383.257C285.722 375.392 291.574 365.617 296.172 355.193C296.543 354.353 296.914 353.514 297.297 352.649C304.508 335.105 304.402 315.199 297.392 297.645C291.382 283.418 281.335 272.352 269.59 262.659C267.695 261.064 265.885 259.382 264.07 257.698C261.473 255.305 258.83 253.024 256.079 250.811C252.277 247.735 248.731 244.441 245.178 241.084C242.574 238.636 239.926 236.305 237.138 234.067C232.854 230.625 228.885 226.884 224.885 223.121C221.372 219.818 217.737 216.67 214.071 213.54C213.174 212.773 212.277 212.005 211.381 211.238C210.927 210.849 210.473 210.461 210.005 210.06C206.651 207.176 203.392 204.202 200.156 201.186C197.795 198.999 195.369 196.934 192.862 194.918C189.558 192.252 186.452 189.436 183.368 186.522C179.616 182.978 175.77 179.629 171.752 176.387C169.78 174.783 167.846 173.147 165.93 171.476C165.376 170.994 164.823 170.512 164.252 170.016C163.063 168.787 163.063 168.787 163.063 167.278C184.079 166.733 205.1 166.401 226.123 166.306Z"
            fill="url(#paint1_radial_33_196)"
          />
          <defs>
            <radialGradient
              id="paint0_radial_33_196"
              cx="0"
              cy="0"
              r="1"
              gradientUnits="userSpaceOnUse"
              gradientTransform="translate(197.5 166.891) rotate(90) scale(166.891 197.5)"
            >
              <stop offset="0.394231" stopColor="#11205A" />
              <stop offset="0.639423" stopColor="#293D99" />
              <stop offset="1" stopColor="#4E66CF" />
            </radialGradient>
            <radialGradient
              id="paint1_radial_33_196"
              cx="0"
              cy="0"
              r="1"
              gradientUnits="userSpaceOnUse"
              gradientTransform="translate(198.229 333.782) rotate(90) scale(167.62 196.771)"
            >
              <stop offset="0.394231" stopColor="#11205A" />
              <stop offset="0.639423" stopColor="#293D99" />
              <stop offset="1" stopColor="#4E66CF" />
            </radialGradient>
          </defs>
        </svg>*/}

        <GradientBackground />
      </div>

      {/* Background Blur Overlay - Rectangle 1 */}
      <div
        className="absolute inset-0 bg-[#070724]/50"
        style={{
          backdropFilter: "blur(152px)",
          WebkitBackdropFilter: "blur(152px)",
        }}
      />
    </div>
  );
}
